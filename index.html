<!DOCTYPE html>
<html lang="en">
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous"
  />
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Weather App</title>
    <style>
   /* body {
      font-family: "Comfortaa", cursive, sans-serif;
      background-image: url(https://images.pexels.com/photos/220201/pexels-photo-220201.jpeg?auto=compress&cs=tinysrgb&h=650&w=940);
      background-repeat: no-repeat;
      background-size: cover;
      background-position: center;
}*/
      h1 {
        display: block;
        text-align: center;
        font-weight: bolder;
        color: rgb(255, 255, 255);
        font-family: "Chivo", sans-serif;
        border: rgb(97, 93, 93) 1px solid;
        max-width: 300px;
        min-width: 300px;
        border-radius: 10px;
        margin: 0 auto;
        padding-top: 1cm;
        padding-bottom: 1px;
        background-color: #0e1f3a;
        opacity: 0.85;
      }
      .details {
        display: block;
        list-style-type: none;
        text-align: center;
        font-weight: bolder;
        font-family: "Chivo", sans-serif;
        font-size: 15px;
        padding-left: 0.5cm;
        padding-right: 1.5cm;
        color: rgb(255, 255, 255);
      }

      /*h2 {
        display: block;
        text-align: center;
        font-weight: lighter;
        font-family: "Chivo", sans-serif;
        font-size: 20px;
        padding-top: 20px;
        padding-bottom: 1px;
        max-width: 350px;
        margin: 0 auto;
        color: rgb(3, 3, 3);
        border: rgb(97, 93, 93) 1px solid;
        background-color: #96a1c0;
        border-radius: 10px;
      }*/

      ul {
        list-style-type: none;
        /*text-align: center;*/
      }
      
      h3 {
        text-align: center;
        font-family: "Chivo", sans-serif;
        color: rgb(68, 65, 65);
        font-weight: bolder;
        padding-top: 5%;
        font-size: 30px;
      }

      h4 {
        text-align: center;
        font-family: "Chivo", sans-serif;
        color: rgb(68, 65, 65);
        font-weight: bolder;
        font-size: 30px;
      }

      h5 {
        text-align: center;
        font-family: "Chivo", sans-serif;
        color: rgb(0, 0, 0);
        font-size: 20px;
      }

      h6 {
        text-align: center;
        font-family: "Chivo", sans-serif;
        color: rgb(0, 0, 0);
        font-size: 20px;

      }

      .minMax {
        text-align: center;
        font-family: "Chivo", sans-serif;
        color: rgb(0, 0, 0);
        font-size: 30px;
        color: rgb(68, 65, 65);
      }

      input {
        max-width: 450px;
        margin: 0 auto;
        color: rgb(0, 0, 0);
        font-family: "Chivo", sans-serif;
        border: rgb(97, 93, 93) 1px solid;
        background-color: rgb(255, 255, 255);
        border-radius: 10px;
        font-weight: 200;
        font-size: 20px;
      }

      .icon {
        font-size: 70px;
      }

      .frame {
        display: block;
        text-align: center;
        font-weight: lighter;
        font-family: "Chivo", sans-serif;
        font-size: 20px;
        padding-top: 1.2cm;
        padding-bottom: 1cm;
        max-width: 400px;
        min-width: 400px;
        margin: 0 auto;
        color: rgb(3, 3, 3);
        border: rgb(97, 93, 93) 1px solid;
        background-color: #96a1c0;
        border-radius: 10px;
        background-image: url(https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1052&q=80);
}

      .app {
        display: block;
        text-align: center;
        padding: 10px 0;
        max-width: 500px;
        margin: 0 auto;
        border: rgb(97, 93, 93) 5px solid;
        background-image: linear-gradient(to top, #c7eaf0 0%, #a3acd6 100%);
        border-radius: 10px;
      }

      hr {
        max-width: 450px;
      }

      .searcher {
        text-align: center;
        color: rgb(0, 0, 0);
        margin: 0%;
        size: 10px;
        font-family: "Chivo", sans-serif;
      }

      button {
        display: block;
        text-align: center;
        margin: 20px auto;
        padding: 10px;
        color: rgb(255, 255, 255);
        font-family: "Chivo", sans-serif;
        border: rgb(97, 93, 93) 1px solid;
        background-color: #20204d;
        border-radius: 50px;
        font-weight: 200;
        font-size: 18px;
      }
      .description {
        text-transform: capitalize;
      }
      .col1 {
        font-size: 0.5cm;
        text-align: center;
        margin: auto;
        font-size: 20px;
        font-family: "Chivo", sans-serif;
 
      }
      footer {
        color: black;
        margin: 0px 0 15px 0;
        font-family: "Chivo", sans-serif;
      }

      .degreesTypes {
        color: rgb(255, 255, 255);
        font-size: 0.5cm;
        text-align: center;
      }

      .degrees .active {
        color:rgb(255, 255, 255);
        cursor: default;
      }
   
      .degrees .active:hover {
        text-decoration: none;
      }

     


    </style>
  </head>
  <body>
    <section>
      <div class="app 1">
        <form id="search-form">
          <input
            type="text"
            placeholder="Search for a city"
            autocomplete="off"
            autofocus="on"
            id="search-text-input"
          />
          <input type="submit" value="🔍" />
        </form>
        
        <button 
        id="currentButton">Current location
      </button>

      <div class="frame">
        <h1>
          <div class="degrees">
            <span class="temperature" id="temperature">3°C</span>
            <span class="degreesTypes">
              <a href="#" id="celsius-link" class="active">°C</a> /
              <a href="#" id="fahrenheit-link" class="active">°F</a>
          </span>

          </div>
          <span class="description" id="temperature-description">Cloudy</span>
          <div class="icono">
            <img src="" alt="Clear" id="icon" class="float-center" />
            <br />
            <div class="details">
              <ul>
                <li><b>Feels like: </b><span id="feels"></span>°C</li>
                <li><b>Wind: </b><span id="wind"> </span> km/h</li>
                <li><b>Humidity: </b><span id="humidity"></span>%</li>
                <li><b>Pressure: </b><span id="pressure"> </span> Pa%</li>
              </ul>
            </div>
          </div>
        </h1>

        <h2>
        </h2>
      </div>

        <h3>
          <br />
          <span class="city" id="city">Madrid</span>
        </h3>

        <h4>
          <hr />
          Sunday | Jan 10 | 21:03
          
        </h4>

        <h5>
         
        </h5>
         
        <h6>
          
        </h6>


        <div class="minMax">
          <tr>
            <span class="minTemperature" id="min">4</span>
            <span class="maxTemperature" id="max">8</span>
        </tr>
        </div>

        <hr>
         
        <br>
        <div class=forecastWeather>
          <div class="row forecast" id="forecast">
            <img src="" alt="Clear" id="icon2" class="float-center" width="35" height="35"/>
        </div>
        </div>
    

      </div>

    <footer class="text-center">
        <span class="copyright">© Coded by BeliMoreta</span>
        <br>
        <a href="https://github.com/BeliMoreta/SheCodes-Plus/blob/master/index.html">GitHub</a>
        /
        <a href="https://www.linkedin.com/in/isabel-aguado-moreta-101a69126/">Linkedin</a>
    </footer>

    </section>
<script>

//Date//
let now = new Date();

  let h4 = document.querySelector("h4");
  let h5 = document.querySelector("h5");

  let date = now.getDate();
  let hours = now.getHours();
  let minutes = now.getMinutes();
  if (minutes < 10) {
  minutes = `0${minutes}`;
}
  let year = now.getFullYear();

  let days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
  let day = days[now.getDay()];

  let months = [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
];
    let month = months[now.getMonth()];

    h4.innerHTML = `<hr> ${day} | ${month}  ${date} | ${hours}:${minutes}
            <br>
            <br>
            🌡`;

    

//Searcher//

function search(event) {
    event.preventDefault();
    let searchInput = document.querySelector("#search-text-input");

    let h3 = document.querySelector("h3");
    h3.innerHTML = `<br> ${searchInput.value}`;

    searchCity(searchInput.value);
}

//Time//

function formatHours(timestamp) {

  let date = new Date(timestamp);
  let hours = date.getHours();
  let minutes = date.getMinutes();
  if (minutes < 10) {
  minutes = `0${minutes}`;

return `${hours}:${minutes}`;


}
}

//Forecast//

function showForecast(response){
let forecastElement = document.querySelector("#forecast");
forecastElement.innerHTML = null;
let forecast = null;

for (let index = 0; index <6; index++) {
  let forecast = response.data.list[index];
  forecastElement.innerHTML += `

<div class="col1">
            ${formatHours(forecast.dt * 1000)}
            <br />
            <img src="http://openweathermap.org/img/wn/${forecast.weather[0].icon}@2x.png" alt="Clear" id="icon2" class="float-center" width="35" height="35"/>
            <br />
            ${Math.round(forecast.main.temp_min)}°/<b>${Math.round(forecast.main.temp_max)}°<b>
          </div>`;

}
}

//City//

function searchCity(city) {
  let apiKey = "829fcd3105a3bc78b07b8b3c45973e5b";
  let apiUrl1 = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric`;
  axios.get(`${apiUrl1}&appid=${apiKey}`).then(showTemperature);

  let apiUrl2 = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric`;
  axios.get(apiUrl2).then(showForecast);
}

searchCity("Madrid")

let form = document.querySelector("#search-form");
form.addEventListener("submit", search);



//Terperature Elements//

function showTemperature(response) {
  console.log(response.data);
  let h3 = document.querySelector("h3");
  let temperature = Math.round(response.data.main.temp);
  let temperatureElement = document.querySelector("#temperature");
  let description = document.querySelector("#temperature-description");
  let feels = Math.round(response.data.main.feels_like);
  let feelsElement = document.querySelector("#feels");
  let wind = Math.round(response.data.wind.speed);
  let windElement = document.querySelector("#wind");
  let humidity = Math.round(response.data.main.humidity);
  let humidityElement = document.querySelector("#humidity");
  let pressure = Math.round(response.data.main.pressure);
  let pressureElement = document.querySelector("#pressure");
  let iconElement = document.querySelector("#icon");
  let littleIconElement = document.querySelector("#icon2");
  let min = Math.round(response.data.main.temp_min);
  let minElement = document.querySelector("#min");
  let max = Math.round(response.data.main.temp_max);
  let maxElement = document.querySelector("#max");
 

celsiusTemperature = response.data.main.temp;


  maxElement.innerHTML = `<b>${max}°<b>`;
  minElement.innerHTML = `${min}° /`;
  littleIconElement.setAttribute("src", `http://openweathermap.org/img/wn/${response.data.weather[0].icon}@2x.png`);
  iconElement.setAttribute("src", `http://openweathermap.org/img/wn/${response.data.weather[0].icon}@2x.png`);
  h3.innerHTML = response.data.name;
  pressureElement.innerHTML = `${pressure}`;
  humidityElement.innerHTML = `${humidity}`;
  windElement.innerHTML = `${wind}`;
  feelsElement.innerHTML = `${feels}`;
  temperatureElement.innerHTML = `${temperature}`;
  description.innerHTML = response.data.weather[0].description;
}

 function searchLocation(position) {
  let apiKey = "829fcd3105a3bc78b07b8b3c45973e5b";
  let apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${
    position.coords.latitude
  }&lon=${position.coords.longitude}&appid=${apiKey}&units=metric`;

  axios.get(apiUrl).then(showTemperature);
}

function getCurrentLocation(event){
event.preventDefault();
navigator.geolocation.getCurrentPosition(searchLocation);
}

let currentLocationButton = document.querySelector("#currentButton");
currentLocationButton.addEventListener("click", getCurrentLocation);


//Celsius/fahrenheit//

function showFahrenheitTemperature(event) {
  event.preventDefault();
  
  let temperatureElement = document.querySelector("#temperature");
  // remove/add the active class frokm the celsius link
  celsiusLink.classList.remove("active");
  fahrenheitLink.classList.add("active");
  let fahrenheitTemperature = (celsiusTemperature * 9 / 5) + 32;
  temperatureElement.innerHTML = Math.round(fahrenheitTemperature);
}

function showCelsisusTemperature(event) {
  event.preventDefault();
  
  let temperatureElement = document.querySelector("#temperature");
  // remove/add the active class frokm the fahrenheit link
  fahrenheitLink.classList.remove("active");
  celsiusLink.classList.add("active");
  temperatureElement.innerHTML = Math.round(celsiusTemperature);
}

let celsiusTemperature = null //inside function showTemperature //

let fahrenheitLink = document.querySelector("#fahrenheit-link");
fahrenheitLink.addEventListener("click", showFahrenheitTemperature);

let celsiusLink = document.querySelector("#celsius-link");
celsiusLink.addEventListener("click", showCelsisusTemperature);


    </script>
  </body>
</html>
